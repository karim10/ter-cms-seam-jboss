<?xml version="1.0" encoding="UTF-8"?>


<pages xmlns="http://jboss.com/products/seam/pages"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jboss.com/products/seam/pages http://jboss.com/products/seam/pages-2.0.xsd"
	no-conversation-view-id="/cms.xhtml" login-view-id="/cms.xhtml">
	
	
  <page view-id="/admin.xhtml" login-required="true">
  	<restrict>#{sessionUtilisateur.utilisateur.accesBackend}</restrict>
  	<restrict>#{authentification.authentification()}</restrict>
  </page>
  

	<page view-id="*">
        <navigation from-action="#{identity.logout}">
            <redirect view-id="/cms.xhtml"/>
        </navigation>
    </page>
    
    <page view-id="*">
        <navigation from-action="#{identity.login}">
            <redirect view-id="/admin.xhtml"/>
        </navigation>
    </page>
   
    <page view-id="/modifierUtilisateur.xhtml" login-required="true">
        <navigation from-action="#{gestionUtilisateur.inscription(gestionUtilisateur.utilisateur)}">
            <redirect view-id="/gestionUtilisateur.xhtml"/>
        </navigation>
    </page>
    
    <page view-id="/ajoutUtilisateur.xhtml" login-required="true">
        <navigation from-action="#{gestionUtilisateur.inscription(utilisateur)}">
            <redirect view-id="/gestionUtilisateur.xhtml"/>
        </navigation>
    </page>
     
      <page view-id="/ajoutRubrique.xhtml" login-required="true">
        <navigation from-action="#{gestionContenu.addContenu(rubrique)}">
            <redirect view-id="/gestionRubrique.xhtml"/>
        </navigation>
    </page>
    
     <page view-id="/modifierRubrique.xhtml" login-required="true">
        <navigation from-action="#{gestionContenu.modifierContenu(gestionContenu.contenu)}">
            <redirect view-id="/gestionRubrique.xhtml"/>
        </navigation>
    </page>
    
    <page view-id="/ajoutArticle.xhtml" login-required="true">
        <navigation from-action="#{gestionContenu.addContenu(article)}">
            <redirect view-id="/gestionArticle.xhtml"/>
        </navigation>
    </page>
    
    <page view-id="/choixGesionnaire.xhtml" login-required="true">
        <navigation from-action="#{gestionContenu.contenu.addGestionnaire(lu)}">
            <redirect view-id="/gestionRubrique.xhtml"/>
        </navigation>
    </page>     
    
  <exception class="org.jboss.seam.security.NotLoggedInException">
    <redirect view-id="/cms.xhtml">
      <message>authentifiez vous svp</message>
    </redirect>
  </exception>
  
  <exception class="org.jboss.seam.security.AuthorizationException">
        <end-conversation/>
        <redirect view-id="/cms.xhtml">
            <message>Vous n'avez pas les droits n√©cessaires pour cette action.</message>
        </redirect>
    </exception>
	
</pages>